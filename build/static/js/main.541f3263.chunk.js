(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(35)},31:function(e,t,a){},33:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(19),c=a.n(r),l=a(5),s=a(6),u=a(8),i=a(7),d=a(9),h=a(10),m=a(2),b=a(16),p="https://reactnd-books-api.udacity.com",k=localStorage.token;k||(k=localStorage.token=Math.random().toString(36).substr(-8));var f={Accept:"application/json",Authorization:k},v=function(){return fetch("".concat(p,"/books"),{headers:f}).then(function(e){return e.json()}).then(function(e){return e.books})};var E=function(e){var t=e.book,a=e.update;return o.a.createElement("select",{value:t.shelf||"none",onChange:function(e){return a(t,e.target.value)}},o.a.createElement("option",{value:"move",disabled:!0},"Move to..."),o.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),o.a.createElement("option",{value:"wantToRead"},"Want to Read"),o.a.createElement("option",{value:"read"},"Read"),o.a.createElement("option",{value:"none"},"None"))};var g=function(e){var t=e.book,a=e.update;return o.a.createElement("li",{key:t.id},o.a.createElement("div",{className:"book"},o.a.createElement("div",{className:"book-top"},o.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:t.imageLinks.thumbnail}},o.a.createElement("img",{src:t.imageLinks.thumbnail,alt:t.title,name:t.title,width:"128px",height:"193px"})),o.a.createElement("div",{className:"book-shelf-changer"},o.a.createElement(E,{book:t,update:a}))),o.a.createElement("div",{className:"book-title"},t.title),o.a.createElement("div",{className:"book-authors"},t.authors)))},y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={query:""},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.triggerUpdate=a.triggerUpdate.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.time=null}},{key:"handleChange",value:function(e){var t=e.target.value;clearTimeout(this.time),this.setState({query:t}),this.time=setTimeout(this.triggerUpdate,1e3)}},{key:"triggerUpdate",value:function(){var e=this.state.query;this.props.updateQuery(e)}},{key:"render",value:function(){return o.a.createElement("div",{className:"search-books-bar"},o.a.createElement(h.b,{to:"/"},o.a.createElement("button",{className:"close-search"},"Close")),o.a.createElement("div",{className:"search-books-input-wrapper"},o.a.createElement("input",{type:"text",id:"searchTxt",value:this.state.query,onChange:this.handleChange,placeholder:"Search by title or author"})))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).updateQuery=function(e){console.log("updating query...."),a.setState({query:e},function(){console.log(a.state),a.updateResult()})},a.state={query:"",result:[]},a.updateQuery=a.updateQuery.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"updateResult",value:function(){var e,t=this;console.log("updating query...."),this.state.query?(e=this.state.query,fetch("".concat(p,"/search"),{method:"POST",headers:Object(b.a)({},f,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})).then(function(e){return e.error?t.setState({result:[]}):t.setState({result:e})}):this.setState({result:[]}),console.log("updated result",this.state.result)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"search-books"},o.a.createElement(y,{updateQuery:this.updateQuery}),o.a.createElement("div",{className:"search-books-results"},o.a.createElement(function(){return o.a.createElement("ol",{className:"books-grid"},e.state.result.map(function(t){return o.a.createElement(g,{book:t,update:e.props.update})}))},null)))}}]),t}(n.Component);var O=function(e){var t=e.books,a=e.shelf,n=e.update;return console.log("shelf",a),t?(console.log("books",t),console.log("shelf",a),o.a.createElement("div",{className:"bookshelf-books"},o.a.createElement("ol",{className:"books-grid"},t.filter(function(e){return e.shelf===a}).map(function(e){return o.a.createElement(g,{book:e,update:n})})))):o.a.createElement("div",null)},N="currentlyReading",C="wantToRead",S="read";var R=function(e){return o.a.createElement("div",null,o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),o.a.createElement(O,{books:e.books,shelf:N,update:e.update})),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Want to Read"),o.a.createElement(O,{books:e.books,shelf:C,update:e.update})),o.a.createElement("div",{className:"bookshelf"},o.a.createElement("h2",{className:"bookshelf-title"},"Read"),o.a.createElement(O,{books:e.books,shelf:S,update:e.update})))};var q=function(e){return o.a.createElement("div",{className:"list-books"},o.a.createElement("div",{className:"list-books-title"},o.a.createElement("h1",null,"MyReads")),o.a.createElement("div",{className:"list-books-content"},o.a.createElement(R,{books:e.books,update:e.update})),o.a.createElement("div",{className:"open-search"},o.a.createElement(h.b,{to:"/search"},o.a.createElement("button",null,"Add a book"))))},w=a(0),T=(a(31),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(i.a)(t).call(this,e))).state={books:[]},a.updateBook=a.updateBook.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;console.log(this.state.books),v().then(function(t){e.setState({books:t})}),console.log("main",this.state.books)}},{key:"updateBook",value:function(e,t){var a=this;(function(e,t){return fetch("".concat(p,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)({},f,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then(function(e){var t=e.json();return console.log(t),t})})(e,t).then(function(){e.shelf=t,v().then(function(e){a.setState({books:e})})})}},{key:"render",value:function(){var e=this;return o.a.createElement(w.d,null,o.a.createElement(w.b,{path:"/search",component:function(){return o.a.createElement(j,{update:e.updateBook})}}),o.a.createElement(w.b,{path:"/",component:function(){return o.a.createElement(q,{books:e.state.books,update:e.updateBook})}}),o.a.createElement(w.a,{to:"/"}))}}]),t}(o.a.Component)),B=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(h.a,null,o.a.createElement(T,null))}}]),t}(o.a.Component);a(33);c.a.render(o.a.createElement(B,null),document.getElementById("root"))}},[[21,2,1]]]);
//# sourceMappingURL=main.541f3263.chunk.js.map